<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link rel="icon" href="../favicon.svg?v=1764206426" type="image/svg+xml">
    <link rel="icon" href="../favicon.png?v=1764206426" type="image/png">
    <link rel="apple-touch-icon" href="../apple-touch-icon.png?v=1764206426">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Political Rung Assessment - Demosthenes and Locke</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { margin: 0; padding: 0; }
        
        /* Custom slider styling */
        .political-slider {
            -webkit-appearance: none;
            width: 100%;
            height: 12px;
            border-radius: 6px;
            background: linear-gradient(to right, #3498db 0%, #9b59b6 50%, #e74c3c 100%);
            outline: none;
            cursor: pointer;
        }
        .political-slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 28px;
            height: 28px;
            border-radius: 50%;
            background: white;
            border: 3px solid #333;
            cursor: pointer;
            box-shadow: 0 2px 6px rgba(0,0,0,0.3);
        }
        .political-slider::-moz-range-thumb {
            width: 28px;
            height: 28px;
            border-radius: 50%;
            background: white;
            border: 3px solid #333;
            cursor: pointer;
            box-shadow: 0 2px 6px rgba(0,0,0,0.3);
        }
        
        /* Tooltip styling */
        .tooltip-trigger {
            position: relative;
            border-bottom: 1px dashed #666;
            cursor: help;
        }
        .tooltip-trigger:hover .tooltip-content {
            visibility: visible;
            opacity: 1;
        }
        .tooltip-content {
            visibility: hidden;
            opacity: 0;
            position: absolute;
            bottom: 100%;
            left: 50%;
            transform: translateX(-50%);
            background: #333;
            color: white;
            padding: 8px 12px;
            border-radius: 6px;
            font-size: 13px;
            width: 280px;
            text-align: left;
            z-index: 100;
            transition: opacity 0.2s;
            margin-bottom: 8px;
            font-weight: normal;
            line-height: 1.4;
        }
        .tooltip-content::after {
            content: '';
            position: absolute;
            top: 100%;
            left: 50%;
            transform: translateX(-50%);
            border: 6px solid transparent;
            border-top-color: #333;
        }
    </style>
</head>
<body class="bg-slate-300 min-h-screen">
    <div id="site-header"></div>
    <div id="root"></div>
    
    <script type="text/babel">
        const { useState } = React;

        const PoliticalRungAssessment = () => {
          const issues = [
            { id: 'healthcare', name: 'Healthcare', color: '#e74c3c', icon: 'ðŸ¥¼' },
            { id: 'education', name: 'Education', color: '#3498db', icon: 'ðŸ“š' },
            { id: 'immigration', name: 'Immigration', color: '#9b59b6', icon: 'ðŸŒŽ' },
            { id: 'guns', name: 'Gun Rights', color: '#e67e22', icon: 'ðŸ”«' },
            { id: 'abortion', name: 'Abortion', color: '#1abc9c', icon: 'âš•ï¸' },
            { id: 'housing', name: 'Housing', color: '#f39c12', icon: 'ðŸ ' },
            { id: 'climate', name: 'Climate', color: '#27ae60', icon: 'ðŸŒ±' },
            { id: 'taxes', name: 'Tax Policy', color: '#c0392b', icon: 'ðŸ’°' }
          ];

          const [positions, setPositions] = useState({});
          const [currentIssue, setCurrentIssue] = useState(null);
          const [showResults, setShowResults] = useState(false);

          // Questions - reordered with easy one first
          const questions = {
            rung: [
              { 
                id: 'sources',
                text: 'I regularly read sources from people I disagree with on this',
                hasTextInput: false
              },
              { 
                id: 'steelman',
                text: 'I can steel-man the opposing view so well they\'d agree with my summary',
                hasTextInput: true,
                textPlaceholder: 'Explain the opposing view in your own words...',
                textLabel: 'Steel-man the opposing argument:',
                isTextarea: true,
                hasSteelmanTooltip: true
              },
              { 
                id: 'changed',
                text: 'I\'ve changed my mind on a related policy in the last 2 years',
                hasTextInput: true,
                textPlaceholder: 'What policy did you change your mind on?',
                textLabel: 'What did you change your mind about?',
                isTextarea: false
              },
              { 
                id: 'evidence',
                text: 'I can name specific evidence that would change my mind',
                hasTextInput: true,
                textPlaceholder: 'What evidence would change your view?',
                textLabel: 'What would change your mind?',
                isTextarea: false
              },
              { 
                id: 'tradeoffs',
                text: 'I view this as a trade-off between values, not good vs evil',
                hasTextInput: false,
                hasTradeoffInputs: true
              }
            ]
          };

          const [tempAssessment, setTempAssessment] = useState({
            political: 0,
            rungChecks: {},      // { questionId: true/false }
            rungTexts: {},       // { questionId: 'text content' }
            tradeoffValues: { value1: '', value2: '' }  // For the tradeoff question
          });

          const handleStartAssessment = (issue) => {
            setCurrentIssue(issue);
            setTempAssessment({ 
              political: 0, 
              rungChecks: {},
              rungTexts: {},
              tradeoffValues: { value1: '', value2: '' }
            });
          };

          const handleToggleRung = (questionId) => {
            const newChecks = { ...tempAssessment.rungChecks };
            newChecks[questionId] = !newChecks[questionId];
            
            // Clear text if unchecking
            const newTexts = { ...tempAssessment.rungTexts };
            if (!newChecks[questionId]) {
              delete newTexts[questionId];
            }
            
            // Clear tradeoff values if unchecking tradeoffs
            let newTradeoffValues = tempAssessment.tradeoffValues;
            if (questionId === 'tradeoffs' && !newChecks[questionId]) {
              newTradeoffValues = { value1: '', value2: '' };
            }
            
            setTempAssessment({ 
              ...tempAssessment, 
              rungChecks: newChecks,
              rungTexts: newTexts,
              tradeoffValues: newTradeoffValues
            });
          };

          const handleTextChange = (questionId, value) => {
            setTempAssessment({
              ...tempAssessment,
              rungTexts: {
                ...tempAssessment.rungTexts,
                [questionId]: value
              }
            });
          };

          const handleTradeoffChange = (field, value) => {
            setTempAssessment({
              ...tempAssessment,
              tradeoffValues: {
                ...tempAssessment.tradeoffValues,
                [field]: value
              }
            });
          };

          const calculateRungScore = () => {
            let score = 0;
            questions.rung.forEach(q => {
              if (tempAssessment.rungChecks[q.id]) {
                if (q.hasTextInput) {
                  // 1 point for check, 1 more for text
                  score += 1;
                  if (tempAssessment.rungTexts[q.id]?.trim().length > 10) {
                    score += 1;
                  }
                } else if (q.hasTradeoffInputs) {
                  // 1 point for check, 1 more for both values filled
                  score += 1;
                  const v1 = tempAssessment.tradeoffValues.value1?.trim();
                  const v2 = tempAssessment.tradeoffValues.value2?.trim();
                  if (v1 && v2 && v1.length > 2 && v2.length > 2) {
                    score += 1;
                  }
                } else {
                  // 2 points for simple checkbox
                  score += 2;
                }
              }
            });
            return score;
          };

          const handleSaveIssue = () => {
            const rungScore = calculateRungScore();
            
            setPositions({
              ...positions,
              [currentIssue.id]: {
                political: tempAssessment.political,
                rung: rungScore,
                issue: currentIssue,
                responses: {
                  checks: { ...tempAssessment.rungChecks },
                  texts: { ...tempAssessment.rungTexts },
                  tradeoffs: { ...tempAssessment.tradeoffValues }
                }
              }
            });
            setCurrentIssue(null);
          };

          const calculateStats = () => {
            const scores = Object.values(positions);
            if (scores.length === 0) return null;

            const avgRung = scores.reduce((sum, p) => sum + p.rung, 0) / scores.length;
            
            const highRung = scores.filter(p => p.rung >= 7);
            const midRung = scores.filter(p => p.rung >= 4 && p.rung < 7);
            const lowRung = scores.filter(p => p.rung < 4);

            return { avgRung, highRung, midRung, lowRung, total: scores.length };
          };

          const stats = calculateStats();

          const getGraphPosition = (political, rung) => {
            const x = ((political + 2) / 4) * 80 + 10;
            const y = 90 - (rung / 10) * 80;
            return { x: `${x}%`, y: `${y}%` };
          };

          const getRungLabel = (score) => {
            if (score >= 8) return 'Thinker';
            if (score >= 6) return 'High Mid-Rung';
            if (score >= 4) return 'Low Mid-Rung';
            if (score >= 2) return 'Sports Fan';
            return 'Zealot';
          };

          const getPositionLabel = (value) => {
            if (value <= -1.5) return 'Far Left';
            if (value <= -0.5) return 'Left-leaning';
            if (value <= 0.5) return 'Centrist';
            if (value <= 1.5) return 'Right-leaning';
            return 'Far Right';
          };

          // Steel-man tooltip component
          const SteelmanTooltip = ({ children }) => (
            <span className="tooltip-trigger">
              {children}
              <span className="tooltip-content">
                <strong>Steel-manning</strong> means presenting the opposing argument in its strongest, 
                most charitable formâ€”so well that someone who holds that view would say 
                "Yes, that's exactly why I believe this." The opposite of a straw-man.
              </span>
            </span>
          );

          // Assessment screen for a specific issue
          if (currentIssue) {
            const currentScore = calculateRungScore();
            
            return (
              <div style={{ padding: '30px', maxWidth: '700px', margin: '0 auto', fontFamily: 'system-ui, -apple-system, sans-serif' }}>
                <div style={{ marginBottom: '30px' }}>
                  <h2 style={{ fontSize: '28px', marginBottom: '10px' }}>
                    {currentIssue.icon} {currentIssue.name}
                  </h2>
                  <p style={{ color: '#666', fontSize: '14px' }}>Answer honestly about how you actually engage with this issue</p>
                </div>

                {/* Political Position Slider */}
                <div style={{ background: '#f8f9fa', padding: '25px', borderRadius: '12px', marginBottom: '25px' }}>
                  <h3 style={{ fontSize: '18px', marginBottom: '20px' }}>1. Your Political Position</h3>
                  
                  <div style={{ marginBottom: '15px' }}>
                    <input
                      type="range"
                      min="-2"
                      max="2"
                      step="0.1"
                      value={tempAssessment.political}
                      onChange={(e) => setTempAssessment({ ...tempAssessment, political: parseFloat(e.target.value) })}
                      className="political-slider"
                    />
                  </div>
                  
                  <div style={{ display: 'flex', justifyContent: 'space-between', fontSize: '12px', color: '#666', marginBottom: '10px' }}>
                    <span>Far Left</span>
                    <span>Left</span>
                    <span>Center</span>
                    <span>Right</span>
                    <span>Far Right</span>
                  </div>
                  
                  <div style={{ textAlign: 'center', fontSize: '18px', fontWeight: 'bold', color: '#333' }}>
                    {getPositionLabel(tempAssessment.political)}
                  </div>
                </div>

                {/* Rung Questions */}
                <div style={{ background: '#f8f9fa', padding: '25px', borderRadius: '12px', marginBottom: '25px' }}>
                  <h3 style={{ fontSize: '18px', marginBottom: '15px' }}>2. Your Thinking Rung</h3>
                  <p style={{ fontSize: '14px', color: '#666', marginBottom: '20px' }}>
                    Check what's TRUE for you. For questions with text boxes: 1 point for checking, 1 more for explaining.
                  </p>
                  
                  {questions.rung.map((q, idx) => {
                    const isChecked = tempAssessment.rungChecks[q.id];
                    const textValue = tempAssessment.rungTexts[q.id] || '';
                    const hasValidText = textValue.trim().length > 10;
                    const v1 = tempAssessment.tradeoffValues.value1?.trim() || '';
                    const v2 = tempAssessment.tradeoffValues.value2?.trim() || '';
                    const hasValidTradeoffs = v1.length > 2 && v2.length > 2;
                    
                    // Calculate points display
                    let pointsDisplay;
                    if (q.hasTextInput) {
                      pointsDisplay = isChecked ? (hasValidText ? 'âœ“ 2/2 points' : '1/2 points (add explanation for +1)') : '0/2 points';
                    } else if (q.hasTradeoffInputs) {
                      pointsDisplay = isChecked ? (hasValidTradeoffs ? 'âœ“ 2/2 points' : '1/2 points (fill both values for +1)') : '0/2 points';
                    } else {
                      pointsDisplay = isChecked ? 'âœ“ 2/2 points' : '0/2 points';
                    }
                    
                    return (
                      <div key={q.id} style={{ marginBottom: '16px' }}>
                        <div
                          onClick={() => handleToggleRung(q.id)}
                          style={{
                            padding: '15px',
                            background: isChecked ? '#e8f5e9' : 'white',
                            border: isChecked ? '2px solid #27ae60' : '2px solid #ddd',
                            borderRadius: (q.hasTextInput || q.hasTradeoffInputs) && isChecked ? '8px 8px 0 0' : '8px',
                            cursor: 'pointer',
                            display: 'flex',
                            alignItems: 'flex-start',
                            gap: '12px',
                            transition: 'all 0.2s'
                          }}
                        >
                          <div style={{
                            width: '24px',
                            height: '24px',
                            borderRadius: '4px',
                            border: '2px solid ' + (isChecked ? '#27ae60' : '#ccc'),
                            background: isChecked ? '#27ae60' : 'white',
                            flexShrink: 0,
                            display: 'flex',
                            alignItems: 'center',
                            justifyContent: 'center',
                            color: 'white',
                            fontSize: '14px'
                          }}>
                            {isChecked && 'âœ“'}
                          </div>
                          <div style={{ flex: 1 }}>
                            <span style={{ fontSize: '15px', lineHeight: '1.5' }}>
                              {q.hasSteelmanTooltip ? (
                                <>I can <SteelmanTooltip>steel-man</SteelmanTooltip> the opposing view so well they'd agree with my summary</>
                              ) : q.hasTradeoffInputs ? (
                                <>I view this as a trade-off between values, not good vs evil</>
                              ) : (
                                q.text
                              )}
                            </span>
                            <div style={{ fontSize: '12px', color: '#888', marginTop: '4px' }}>
                              {pointsDisplay}
                            </div>
                          </div>
                        </div>
                        
                        {/* Conditional text input for regular text questions */}
                        {q.hasTextInput && isChecked && (
                          <div style={{
                            padding: '15px',
                            background: '#f0f9f0',
                            border: '2px solid #27ae60',
                            borderTop: 'none',
                            borderRadius: '0 0 8px 8px'
                          }}>
                            <label style={{ fontSize: '13px', color: '#555', display: 'block', marginBottom: '8px' }}>
                              {q.textLabel} <span style={{ color: '#888' }}>(+1 point)</span>
                            </label>
                            {q.isTextarea ? (
                              <textarea
                                value={textValue}
                                onChange={(e) => handleTextChange(q.id, e.target.value)}
                                placeholder={q.textPlaceholder}
                                onClick={(e) => e.stopPropagation()}
                                style={{
                                  width: '100%',
                                  minHeight: '80px',
                                  padding: '10px',
                                  border: '1px solid #ccc',
                                  borderRadius: '6px',
                                  fontSize: '14px',
                                  resize: 'vertical',
                                  boxSizing: 'border-box'
                                }}
                              />
                            ) : (
                              <input
                                type="text"
                                value={textValue}
                                onChange={(e) => handleTextChange(q.id, e.target.value)}
                                placeholder={q.textPlaceholder}
                                onClick={(e) => e.stopPropagation()}
                                style={{
                                  width: '100%',
                                  padding: '10px',
                                  border: '1px solid #ccc',
                                  borderRadius: '6px',
                                  fontSize: '14px',
                                  boxSizing: 'border-box'
                                }}
                              />
                            )}
                          </div>
                        )}
                        
                        {/* Tradeoff inputs for values question */}
                        {q.hasTradeoffInputs && isChecked && (
                          <div style={{
                            padding: '15px',
                            background: '#f0f9f0',
                            border: '2px solid #27ae60',
                            borderTop: 'none',
                            borderRadius: '0 0 8px 8px'
                          }}>
                            <label style={{ fontSize: '13px', color: '#555', display: 'block', marginBottom: '12px' }}>
                              What values are in tension? <span style={{ color: '#888' }}>(+1 point)</span>
                            </label>
                            <div style={{ display: 'flex', alignItems: 'center', gap: '10px', flexWrap: 'wrap' }}>
                              <span style={{ fontSize: '14px', color: '#555' }}>A trade-off between</span>
                              <input
                                type="text"
                                value={v1}
                                onChange={(e) => handleTradeoffChange('value1', e.target.value)}
                                placeholder="e.g., Bodily Autonomy"
                                onClick={(e) => e.stopPropagation()}
                                style={{
                                  padding: '8px 12px',
                                  border: '1px solid #ccc',
                                  borderRadius: '6px',
                                  fontSize: '14px',
                                  width: '160px'
                                }}
                              />
                              <span style={{ fontSize: '14px', color: '#555', fontWeight: 'bold' }}>vs</span>
                              <input
                                type="text"
                                value={v2}
                                onChange={(e) => handleTradeoffChange('value2', e.target.value)}
                                placeholder="e.g., Life of Child"
                                onClick={(e) => e.stopPropagation()}
                                style={{
                                  padding: '8px 12px',
                                  border: '1px solid #ccc',
                                  borderRadius: '6px',
                                  fontSize: '14px',
                                  width: '160px'
                                }}
                              />
                            </div>
                          </div>
                        )}
                      </div>
                    );
                  })}
                  
                  <div style={{ marginTop: '20px', padding: '15px', background: '#fff3cd', borderRadius: '8px', border: '1px solid #ffc107' }}>
                    <strong>Your Rung Score: {currentScore}/10</strong>
                    <div style={{ fontSize: '13px', marginTop: '5px', color: '#666' }}>
                      {getRungLabel(currentScore)}
                    </div>
                  </div>
                </div>

                <div style={{ display: 'flex', gap: '15px' }}>
                  <button
                    onClick={handleSaveIssue}
                    style={{
                      flex: 1,
                      padding: '15px',
                      background: '#27ae60',
                      color: 'white',
                      border: 'none',
                      borderRadius: '8px',
                      fontSize: '16px',
                      fontWeight: 'bold',
                      cursor: 'pointer'
                    }}
                  >
                    Save & Continue
                  </button>
                  <button
                    onClick={() => setCurrentIssue(null)}
                    style={{
                      padding: '15px 25px',
                      background: '#95a5a6',
                      color: 'white',
                      border: 'none',
                      borderRadius: '8px',
                      fontSize: '16px',
                      cursor: 'pointer'
                    }}
                  >
                    Cancel
                  </button>
                </div>
              </div>
            );
          }

          // Results screen
          if (showResults && stats) {
            return (
              <div style={{ padding: '30px', maxWidth: '900px', margin: '0 auto', fontFamily: 'system-ui, -apple-system, sans-serif' }}>
                <div style={{ marginBottom: '30px' }}>
                  <h2 style={{ fontSize: '32px', marginBottom: '10px' }}>Your Political Rung Profile</h2>
                  <p style={{ color: '#666' }}>Based on {stats.total} issues assessed</p>
                </div>

                <div style={{ background: '#f8f9fa', padding: '30px', borderRadius: '12px', marginBottom: '30px' }}>
                  <div style={{ fontSize: '48px', fontWeight: 'bold', color: '#3498db', marginBottom: '10px' }}>
                    {stats.avgRung.toFixed(1)}/10
                  </div>
                  <div style={{ fontSize: '20px', color: '#666', marginBottom: '20px' }}>
                    Overall Rung Score: <strong>{getRungLabel(stats.avgRung)}</strong>
                  </div>
                  
                  <div style={{ display: 'grid', gridTemplateColumns: 'repeat(auto-fit, minmax(200px, 1fr))', gap: '15px', marginTop: '20px' }}>
                    <div style={{ background: '#e8f5e9', padding: '20px', borderRadius: '8px' }}>
                      <div style={{ fontSize: '28px', fontWeight: 'bold', color: '#27ae60' }}>{stats.highRung.length}</div>
                      <div style={{ fontSize: '14px', color: '#666' }}>High-Rung Issues (7-10)</div>
                    </div>
                    <div style={{ background: '#fff3cd', padding: '20px', borderRadius: '8px' }}>
                      <div style={{ fontSize: '28px', fontWeight: 'bold', color: '#f39c12' }}>{stats.midRung.length}</div>
                      <div style={{ fontSize: '14px', color: '#666' }}>Mid-Rung Issues (4-6)</div>
                    </div>
                    <div style={{ background: '#ffebee', padding: '20px', borderRadius: '8px' }}>
                      <div style={{ fontSize: '28px', fontWeight: 'bold', color: '#e74c3c' }}>{stats.lowRung.length}</div>
                      <div style={{ fontSize: '14px', color: '#666' }}>Low-Rung Issues (0-3)</div>
                    </div>
                  </div>
                </div>

                {/* 2D Political Landscape Graph */}
                <div style={{ background: 'white', padding: '30px', borderRadius: '12px', border: '2px solid #e0e0e0', marginBottom: '30px', position: 'relative', height: '400px' }}>
                  <h3 style={{ fontSize: '20px', marginBottom: '20px', textAlign: 'center' }}>Your Political Landscape</h3>
                  
                  <div style={{ position: 'absolute', left: '10%', right: '10%', top: '15%', bottom: '15%', border: '2px solid #ccc', background: '#fafafa' }}>
                    {/* Axis labels */}
                    <div style={{ position: 'absolute', left: '-70px', top: '10px', fontSize: '12px', fontWeight: 'bold', color: '#27ae60' }}>
                      THINKER
                    </div>
                    <div style={{ position: 'absolute', left: '-60px', bottom: '10px', fontSize: '12px', fontWeight: 'bold', color: '#e74c3c' }}>
                      ZEALOT
                    </div>
                    <div style={{ position: 'absolute', left: '10px', bottom: '-30px', fontSize: '12px', fontWeight: 'bold', color: '#3498db' }}>
                      Progressive
                    </div>
                    <div style={{ position: 'absolute', right: '10px', bottom: '-30px', fontSize: '12px', fontWeight: 'bold', color: '#e74c3c' }}>
                      Conservative
                    </div>

                    {/* Grid lines */}
                    <div style={{ position: 'absolute', left: '50%', top: 0, bottom: 0, width: '1px', background: '#ddd' }}></div>
                    <div style={{ position: 'absolute', top: '50%', left: 0, right: 0, height: '1px', background: '#ddd' }}></div>

                    {/* Plot each issue as a dot */}
                    {Object.values(positions).map((pos, idx) => {
                      const graphPos = getGraphPosition(pos.political, pos.rung);
                      return (
                        <div
                          key={idx}
                          style={{
                            position: 'absolute',
                            left: graphPos.x,
                            top: graphPos.y,
                            transform: 'translate(-50%, -50%)',
                            width: '20px',
                            height: '20px',
                            borderRadius: '50%',
                            background: pos.issue.color,
                            border: '3px solid white',
                            boxShadow: '0 2px 8px rgba(0,0,0,0.3)',
                            cursor: 'pointer',
                            zIndex: 10
                          }}
                          title={`${pos.issue.name}: ${getRungLabel(pos.rung)}`}
                        />
                      );
                    })}
                  </div>

                  {/* Legend */}
                  <div style={{ position: 'absolute', bottom: '15px', right: '15px', background: 'white', padding: '10px', borderRadius: '8px', border: '1px solid #ddd', fontSize: '11px' }}>
                    <div style={{ fontWeight: 'bold', marginBottom: '5px' }}>Issues:</div>
                    {Object.values(positions).map((pos, idx) => (
                      <div key={idx} style={{ display: 'flex', alignItems: 'center', gap: '6px', marginBottom: '3px' }}>
                        <div style={{ width: '10px', height: '10px', borderRadius: '50%', background: pos.issue.color }}></div>
                        <span>{pos.issue.icon} {pos.issue.name} ({pos.rung}/10)</span>
                      </div>
                    ))}
                  </div>
                </div>

                {/* Your Responses Section */}
                <div style={{ background: '#f8f9fa', padding: '25px', borderRadius: '12px', marginBottom: '30px' }}>
                  <h3 style={{ fontSize: '20px', marginBottom: '20px' }}>Your Reflections</h3>
                  {Object.values(positions).map((pos, idx) => {
                    const texts = pos.responses?.texts || {};
                    const tradeoffs = pos.responses?.tradeoffs || {};
                    const hasTexts = Object.keys(texts).some(k => texts[k]?.trim());
                    const hasTradeoffs = tradeoffs.value1?.trim() && tradeoffs.value2?.trim();
                    
                    if (!hasTexts && !hasTradeoffs) return null;
                    
                    return (
                      <div key={idx} style={{ marginBottom: '20px', padding: '15px', background: 'white', borderRadius: '8px', border: '1px solid #ddd' }}>
                        <div style={{ fontWeight: 'bold', marginBottom: '10px' }}>{pos.issue.icon} {pos.issue.name}</div>
                        {texts.steelman && (
                          <div style={{ marginBottom: '8px' }}>
                            <div style={{ fontSize: '12px', color: '#666' }}>Steel-man:</div>
                            <div style={{ fontSize: '14px', fontStyle: 'italic' }}>"{texts.steelman}"</div>
                          </div>
                        )}
                        {texts.changed && (
                          <div style={{ marginBottom: '8px' }}>
                            <div style={{ fontSize: '12px', color: '#666' }}>Changed mind on:</div>
                            <div style={{ fontSize: '14px' }}>{texts.changed}</div>
                          </div>
                        )}
                        {texts.evidence && (
                          <div style={{ marginBottom: '8px' }}>
                            <div style={{ fontSize: '12px', color: '#666' }}>Would change mind if:</div>
                            <div style={{ fontSize: '14px' }}>{texts.evidence}</div>
                          </div>
                        )}
                        {hasTradeoffs && (
                          <div>
                            <div style={{ fontSize: '12px', color: '#666' }}>Values in tension:</div>
                            <div style={{ fontSize: '14px' }}><strong>{tradeoffs.value1}</strong> vs <strong>{tradeoffs.value2}</strong></div>
                          </div>
                        )}
                      </div>
                    );
                  })}
                </div>

                <div style={{ display: 'flex', gap: '15px' }}>
                  <button
                    onClick={() => setShowResults(false)}
                    style={{
                      flex: 1,
                      padding: '15px',
                      background: '#3498db',
                      color: 'white',
                      border: 'none',
                      borderRadius: '8px',
                      fontSize: '16px',
                      fontWeight: 'bold',
                      cursor: 'pointer'
                    }}
                  >
                    Assess More Issues
                  </button>
                  <button
                    onClick={() => {
                      setPositions({});
                      setShowResults(false);
                    }}
                    style={{
                      padding: '15px 25px',
                      background: '#95a5a6',
                      color: 'white',
                      border: 'none',
                      borderRadius: '8px',
                      fontSize: '16px',
                      cursor: 'pointer'
                    }}
                  >
                    Start Over
                  </button>
                </div>
              </div>
            );
          }

          // Main issue selection screen
          return (
            <div style={{ padding: '30px', maxWidth: '900px', margin: '0 auto', fontFamily: 'system-ui, -apple-system, sans-serif' }}>
              <div style={{ textAlign: 'center', marginBottom: '40px' }}>
                <h1 style={{ fontSize: '36px', marginBottom: '15px' }}>Which Rung Are You On?</h1>
                <p style={{ fontSize: '18px', color: '#666', maxWidth: '600px', margin: '0 auto' }}>
                  Assess yourself on different political issues. Are you a Thinker, Sports Fan, or Zealot?
                </p>
              </div>

              <div style={{ display: 'grid', gridTemplateColumns: 'repeat(auto-fill, minmax(200px, 1fr))', gap: '20px', marginBottom: '30px' }}>
                {issues.map((issue) => {
                  const hasAssessed = positions[issue.id];
                  return (
                    <div
                      key={issue.id}
                      onClick={() => handleStartAssessment(issue)}
                      style={{
                        padding: '25px',
                        background: hasAssessed ? '#e8f5e9' : 'white',
                        border: hasAssessed ? '2px solid #27ae60' : '2px solid #e0e0e0',
                        borderRadius: '12px',
                        cursor: 'pointer',
                        transition: 'all 0.2s',
                        position: 'relative',
                        textAlign: 'center'
                      }}
                      onMouseEnter={(e) => e.currentTarget.style.transform = 'translateY(-4px)'}
                      onMouseLeave={(e) => e.currentTarget.style.transform = 'translateY(0)'}
                    >
                      <div style={{ fontSize: '40px', marginBottom: '10px' }}>{issue.icon}</div>
                      <div style={{ fontSize: '16px', fontWeight: 'bold', marginBottom: '8px' }}>{issue.name}</div>
                      {hasAssessed && (
                        <div style={{ fontSize: '14px', color: '#27ae60', fontWeight: 'bold' }}>
                          âœ“ {positions[issue.id].rung}/10
                        </div>
                      )}
                      {!hasAssessed && (
                        <div style={{ fontSize: '13px', color: '#999' }}>Click to assess</div>
                      )}
                    </div>
                  );
                })}
              </div>

              {Object.keys(positions).length > 0 && (
                <div style={{ textAlign: 'center' }}>
                  <button
                    onClick={() => setShowResults(true)}
                    style={{
                      padding: '18px 40px',
                      background: '#3498db',
                      color: 'white',
                      border: 'none',
                      borderRadius: '10px',
                      fontSize: '18px',
                      fontWeight: 'bold',
                      cursor: 'pointer',
                      boxShadow: '0 4px 12px rgba(52, 152, 219, 0.3)'
                    }}
                  >
                    View My Results ({Object.keys(positions).length} issues assessed)
                  </button>
                </div>
              )}

              <div style={{ marginTop: '50px', padding: '25px', background: '#f8f9fa', borderRadius: '12px' }}>
                <h3 style={{ fontSize: '20px', marginBottom: '15px' }}>How This Works</h3>
                <p style={{ fontSize: '15px', lineHeight: '1.6', color: '#666' }}>
                  For each issue, you'll rate your political position (left to right) and answer 5 questions about 
                  how you think about that issue. Some questions ask you to explain your thinking for bonus points.
                  Be honestâ€”this is for your eyes only. The goal isn't to score perfectly; it's to understand 
                  where you're thinking clearly and where you're reacting tribally.
                </p>
              </div>
            </div>
          );
        };

        ReactDOM.render(<PoliticalRungAssessment />, document.getElementById('root'));
    </script>
    <div id="site-footer"></div>
    <script src="../js/components.js"></script>

    <!-- Site Footer -->
    <footer class="bg-[#002855] border-t border-amber-500/30 mt-16 py-8">
        <div class="max-w-6xl mx-auto px-4 text-center text-sm">
            <p class="mb-2 text-amber-400 font-semibold">
                Utah Legislative Tracker
            </p>
            <p class="mb-3 text-amber-200/80">
                An independent, volunteer-run civic project. Organization positions are sourced 
                from public statements and may not reflect current stances. 
                Not affiliated with Utah state government or any tracked organization.
            </p>
            <p class="text-amber-300/70">
                Organizations: To correct your positions or request edit access, contact 
                <a href="mailto:demostheneslockeUT@proton.me" class="text-amber-400 hover:text-amber-200 underline">
                    demostheneslockeUT@proton.me
                </a>
            </p>
        </div>
    </footer>

</body>
</html>
